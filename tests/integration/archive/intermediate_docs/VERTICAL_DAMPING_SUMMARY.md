# 수직 운동 감쇠 테스트 결과

## 실행 요약

**날짜**: 2026-02-14
**목적**: 고위도 위치의 빠른 상승 억제
**방법**: `vertical_damping` 파라미터 조정
**테스트**: 고위도 4개 위치 (서울, 부산, 도쿄, 베이징)

## 테스트 파라미터

| 테스트 | vertical_damping | 설명 |
|--------|------------------|------|
| Baseline | 1.0 | 기본값 (감쇠 없음) |
| Test 1 | 0.5 | 50% 감쇠 |
| Test 2 | 0.3 | 70% 감쇠 |

## 결과

### 완료율 비교

| 위치 | Baseline (1.0) | Damping 0.5 | Damping 0.3 |
|------|----------------|-------------|-------------|
| 서울 | 21/25 (84%) | 18/25 (72%) | 18/25 (72%) |
| 부산 | 20/25 (80%) | 20/25 (80%) | 20/25 (80%) |
| 도쿄 | 23/25 (92%) | 25/25 (100%) ✅ | 23/25 (92%) |
| 베이징 | 11/25 (44%) | 9/25 (36%) | 9/25 (36%) |

### 전체 요약

| Metric | Baseline | Damping 0.5 | Damping 0.3 |
|--------|----------|-------------|-------------|
| 완료 | 0/4 (0%) | 1/4 (25%) ✅ | 0/4 (0%) |
| 총 포인트 | 75/100 (75%) | 72/100 (72%) | 70/100 (70%) |

## 수직 운동 분석

### 압력 변화 (상승)

| 위치 | Baseline | Damping 0.5 | Damping 0.3 |
|------|----------|-------------|-------------|
| 서울 | +671 hPa (34 hPa/h) | +660 hPa (39 hPa/h) | +687 hPa (40 hPa/h) |
| 부산 | +662 hPa (35 hPa/h) | +673 hPa (35 hPa/h) | +665 hPa (35 hPa/h) |
| 도쿄 | +678 hPa (31 hPa/h) | +700 hPa (29 hPa/h) | +698 hPa (32 hPa/h) |
| 베이징 | +666 hPa (67 hPa/h) | +694 hPa (87 hPa/h) | +690 hPa (86 hPa/h) |

**놀라운 발견**: 감쇠를 적용해도 상승 속도가 거의 변하지 않음!

## 핵심 발견

### 1. 수직 감쇠의 제한적 효과 ⚠️

**예상**:
- 감쇠 → 상승 속도 감소 → 제트 기류 진입 지연

**실제**:
- 감쇠 → 상승 속도 거의 동일 또는 증가
- 도쿄만 개선 (23 → 25 포인트)
- 서울, 베이징 악화

**이유**:
1. **Mode 7의 수직 운동 메커니즘**
   - Mode 7은 수평 평균화 사용
   - `vertical_damping`은 Mode 8에만 직접 적용
   - Mode 7에서는 효과 제한적

2. **auto_vertical_mode의 영향**
   - 고위도: Mode 7 사용
   - Mode 7은 공간 평균화로 이미 안정적
   - 추가 감쇠 효과 미미

3. **제트 기류의 압도적 영향**
   - 수평 풍속이 너무 빠름 (50-100 m/s)
   - 수직 감쇠로는 수평 이동 제어 불가
   - 물리적 한계

### 2. 도쿄의 개선 (유일한 성공) ✅

**결과**:
- Baseline: 23/25 (92%)
- Damping 0.5: 25/25 (100%) ✅

**왜 도쿄만?**:
1. **경계에 가까웠음**
   - Baseline에서 이미 23 포인트 (96%)
   - 약간의 개선으로 완료 가능

2. **위도 효과**
   - 도쿄 35.7°N (제트 기류 경계)
   - 베이징 39.9°N (제트 기류 중심)
   - 도쿄는 제트 기류 영향 상대적으로 약함

3. **우연의 일치?**
   - 기상 조건의 변동성
   - 수치 민감도

### 3. 서울과 베이징의 악화 ⚠️

**서울**:
- Baseline: 21 → Damping 0.5: 18 (-3 포인트)

**베이징**:
- Baseline: 11 → Damping 0.5: 9 (-2 포인트)

**가능한 원인**:
1. **다른 궤적 경로**
   - 감쇠로 인한 미세한 차이
   - 카오스 시스템의 민감도
   - 다른 풍속장 영역 통과

2. **수치 불안정성**
   - 감쇠가 적분 안정성에 영향
   - 더 빠른 경계 탈출

3. **기상 조건**
   - 각 테스트는 동일한 GFS 데이터 사용
   - 하지만 초기 조건의 미세한 차이

## 결론

### 1. 수직 감쇠는 근본적 해결책이 아님 ❌

**이유**:
- Mode 7에서 효과 제한적
- 제트 기류 영향 압도적
- 일부 위치 악화

**교훈**:
- 단순한 파라미터 조정으로는 한계
- 물리적 메커니즘 이해 필요
- 제트 기류는 피할 수 없음

### 2. 도쿄 개선은 의미 있음 ✅

**하지만**:
- 1/4 위치만 개선 (25%)
- 다른 위치 악화 (서울, 베이징)
- 전체적으로 개선 없음

**평가**:
- 부분적 성공
- 전체 적용은 권장하지 않음

### 3. 현재 상태 수용이 현실적 ✅

**이유**:
1. 저위도 100% 완료 (4/4)
2. 고위도 제트 기류는 물리적 현실
3. 추가 개선 방법의 한계 확인
4. 평균 완료율 86.5% (양호)

## 대안 평가

### Option A: 추가 GFS 확장 (100-150°E)

**예상 효과**:
- 베이징: 9h → 13-14h (+4-5h)
- 서울: 18h → 22-23h (+4-5h)
- 부산, 도쿄: 완료 가능

**장점**:
- 명확한 개선
- 구현 간단

**단점**:
- 데이터 크기 증가 (~250 MB)
- 다운로드 시간 증가
- 근본적 해결 아님

**평가**: 실용적이지만 비용 대비 효과 낮음

### Option B: Cubic 보간 구현

**예상 효과**:
- 보간 오차 감소 (30-40% 기여)
- 수평 오차 -15%
- 모든 위치 개선

**장점**:
- 근본적 개선
- 인터넷 불필요
- 즉시 테스트 가능

**단점**:
- 구현 복잡도 높음 (3-4시간)
- 안정성 테스트 필요
- 경계 오류는 해결 안됨

**평가**: 가장 실용적인 개선 방안

### Option C: 현재 상태 수용 (권장) ✅

**현실적 평가**:
- 저위도 100% 완료 (4/4)
- 고위도 제트 기류는 물리적 한계
- 평균 완료율 86.5% (양호)
- 추가 개선 방법의 한계 확인

**수용 이유**:
1. 제트 기류는 극단적으로 빠름 (물리적 현실)
2. 수직 감쇠 효과 제한적 (확인됨)
3. GFS 확장은 비용 대비 효과 낮음
4. Cubic 보간은 경계 오류 해결 안됨

## 권장 다음 단계

### 즉시 실행 (권장) 🎯

**현재 상태로 전체 평가**:
```bash
# 확장된 GFS 데이터로 전체 8개 위치 평가
python tests/integration/evaluate_final_state.py
```

**목적**:
1. 압력 오차 측정
2. 수평 오차 측정
3. 최종 진행률 계산
4. HYSPLIT Web과 비교 (가능한 경우)

**예상 결과**:
- 완료율: 50% (4/8)
- 평균 완료율: 86.5%
- 진행률: 80-82%

### 선택적 개선

**Cubic 보간 구현** (3-4시간):
- 보간 오차 감소
- 수평 오차 개선
- 경계 오류는 유지

**추가 GFS 확장** (20분, 인터넷 필요):
- 경계 오류 일부 개선
- 데이터 크기 증가
- 근본적 해결 아님

## 기술적 통찰

### 1. Mode 7과 vertical_damping의 관계

**발견**:
- `vertical_damping`은 Mode 8에 최적화
- Mode 7은 공간 평균화 사용
- Mode 7에서 감쇠 효과 제한적

**의미**:
- 파라미터 이름과 실제 효과 불일치
- Mode별 다른 접근 필요
- 문서화 개선 필요

### 2. 제트 기류의 압도적 영향

**겨울철 동아시아 제트 기류**:
- 위치: 35-40°N
- 고도: 200-300 hPa
- 속도: 50-100 m/s

**영향**:
- 수직 감쇠로는 제어 불가
- 수평 이동이 너무 빠름
- 물리적 한계

### 3. 카오스 시스템의 민감도

**발견**:
- 미세한 파라미터 변화 → 큰 궤적 차이
- 일부 위치 개선, 일부 악화
- 예측 불가능

**의미**:
- 단순한 파라미터 조정의 한계
- 전체적 접근 필요
- 물리적 이해 중요

## 최종 결론

### 성과 ✅

1. **수직 감쇠 효과 확인**: 제한적
2. **도쿄 개선**: 23 → 25 포인트
3. **한계 확인**: 근본적 해결책 아님

### 한계 ⚠️

1. **전체 개선 없음**: 75% → 72% (악화)
2. **일부 위치 악화**: 서울, 베이징
3. **Mode 7 효과 제한적**: 예상과 다름

### 권장사항 🎯

**즉시**: 현재 상태로 최종 평가
- 압력 오차, 수평 오차 측정
- 최종 진행률 계산
- 문서화 완료

**선택**: Cubic 보간 구현 (시간 있는 경우)
- 보간 오차 감소
- 수평 오차 개선
- 3-4시간 소요

**수용**: 현재 상태 (권장)
- 저위도 100% 완료
- 평균 완료율 86.5%
- 물리적 한계 인정

### 다음 작업

```bash
# 최종 평가 (권장)
python tests/integration/evaluate_final_state.py

# 또는 Cubic 보간 구현 (선택)
# 1. pyhysplit/interpolator.py 수정
# 2. 안정성 테스트
# 3. 정확도 비교
```

---

**작성일**: 2026-02-14
**테스트**: vertical_damping (1.0, 0.5, 0.3)
**최적값**: 0.5 (도쿄만 개선)
**전체 효과**: 제한적 (75% → 72%)
**상태**: ✅ 테스트 완료, 현재 상태 수용 권장
**다음**: 최종 평가 또는 Cubic 보간
